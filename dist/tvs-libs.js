!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.tvsLibs=n():t.tvsLibs=n()}(window,function(){return function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"numericalCompare",function(){return C}),r.d(e,"stringCompare",function(){return L});var o={};r.r(o),r.d(o,"Node",function(){return N}),r.d(o,"nil",function(){return O}),r.d(o,"walkInOrder",function(){return b}),r.d(o,"next",function(){return R}),r.d(o,"prev",function(){return S}),r.d(o,"insert",function(){return _}),r.d(o,"search",function(){return w}),r.d(o,"transplant",function(){return U}),r.d(o,"remove",function(){return x}),r.d(o,"min",function(){return G}),r.d(o,"max",function(){return B}),r.d(o,"rotateLeft",function(){return k}),r.d(o,"rotateRight",function(){return j}),r.d(o,"walkToRoot",function(){return H}),r.d(o,"BinaryTree",function(){return K});var u={};r.r(u),r.d(u,"parentIndex",function(){return q}),r.d(u,"rightIndex",function(){return Y}),r.d(u,"leftIndex",function(){return z}),r.d(u,"heapifyAt",function(){return X}),r.d(u,"heapify",function(){return W}),r.d(u,"insert",function(){return V}),r.d(u,"createHeap",function(){return $});var i={};r.r(i),r.d(i,"RBNode",function(){return J}),r.d(i,"rbNil",function(){return Z}),r.d(i,"insertFixup",function(){return tt}),r.d(i,"remove",function(){return nt}),r.d(i,"RBTree",function(){return rt});var c={};r.r(c),r.d(c,"animateWithTPF",function(){return et}),r.d(c,"animate",function(){return ot}),r.d(c,"createAnimator",function(){return ut});var f={};r.r(f),r.d(f,"windowSize",function(){return it}),r.d(f,"windowSizeObserver",function(){return ct});var a={};r.r(a),r.d(a,"Keys",function(){return ft}),r.d(a,"keyboard",function(){return at}),r.d(a,"keyboardObserver",function(){return dt});var d={};r.r(d),r.d(d,"Buttons",function(){return st}),r.d(d,"mouse",function(){return lt}),r.d(d,"mouseObserver",function(){return ht});var s={};r.r(s),r.d(s,"curry",function(){return pt}),r.d(s,"partial",function(){return gt});var l={};r.r(l),r.d(l,"sign",function(){return mt}),r.d(l,"lerp",function(){return At}),r.d(l,"clamp",function(){return Mt}),r.d(l,"DEG_TO_RAD_FACTOR",function(){return Et}),r.d(l,"degToRad",function(){return Tt});var h={};r.r(h),r.d(h,"and",function(){return It}),r.d(h,"not",function(){return vt}),r.d(h,"defined",function(){return yt}),r.d(h,"notEmpty",function(){return Pt}),r.d(h,"unequal",function(){return Dt}),r.d(h,"equal",function(){return Ft}),r.d(h,"equalArray",function(){return Ct}),r.d(h,"equalObject",function(){return Lt});var p={};r.r(p),r.d(p,"vec",function(){return Nt}),r.d(p,"add",function(){return Ot}),r.d(p,"sub",function(){return bt}),r.d(p,"mul",function(){return Rt}),r.d(p,"div",function(){return St}),r.d(p,"length",function(){return _t}),r.d(p,"normalize",function(){return wt}),r.d(p,"limit",function(){return Ut}),r.d(p,"dot",function(){return xt}),r.d(p,"cross",function(){return Gt}),r.d(p,"cross2D",function(){return Bt}),r.d(p,"isEqual",function(){return kt});var g={};r.r(g),r.d(g,"randInt",function(){return jt}),r.d(g,"randIntInRange",function(){return Ht}),r.d(g,"normalRand",function(){return Kt});var m={};r.r(m),r.d(m,"pickRandom",function(){return qt}),r.d(m,"doTimes",function(){return Yt}),r.d(m,"times",function(){return zt}),r.d(m,"zip",function(){return Qt}),r.d(m,"flatten",function(){return Xt}),r.d(m,"mapcat",function(){return Wt}),r.d(m,"shuffle",function(){return Vt}),r.d(m,"map",function(){return $t}),r.d(m,"each",function(){return Jt});var A={};r.r(A),r.d(A,"interpolate",function(){return Zt}),r.d(A,"lerpVecs",function(){return tn}),r.d(A,"split",function(){return nn}),r.d(A,"translate",function(){return rn}),r.d(A,"rotateLeftInPlace",function(){return en}),r.d(A,"rotateRightInPlace",function(){return on}),r.d(A,"rotateLeft",function(){return un}),r.d(A,"rotateRight",function(){return cn}),r.d(A,"normal",function(){return fn}),r.d(A,"side",function(){return an});var M={};r.r(M),r.d(M,"top",function(){return dn}),r.d(M,"right",function(){return sn}),r.d(M,"bottom",function(){return ln}),r.d(M,"left",function(){return hn}),r.d(M,"combineEdges",function(){return pn}),r.d(M,"extrudeTop",function(){return gn}),r.d(M,"extrudeRight",function(){return mn}),r.d(M,"extrudeBottom",function(){return An}),r.d(M,"extrudeLeft",function(){return Mn}),r.d(M,"divideHorizontal",function(){return En}),r.d(M,"divideVertical",function(){return Tn}),r.d(M,"quadTriangles",function(){return In}),r.d(M,"triangulate",function(){return vn});var E={};r.r(E),r.d(E,"BLACK",function(){return yn}),r.d(E,"WHITE",function(){return Pn}),r.d(E,"mixColors",function(){return Dn}),r.d(E,"grey",function(){return Fn}),r.d(E,"colorRgbaToCSS",function(){return Cn}),r.d(E,"intToFloat",function(){return Ln}),r.d(E,"floatToInt",function(){return Nn}),r.d(E,"hexToRgb",function(){return On}),r.d(E,"rgbToHexString",function(){return bn}),r.d(E,"hexStringToRgb",function(){return Rn}),r.d(E,"rgbToHSL",function(){return Sn}),r.d(E,"hslToRGB",function(){return _n}),r.d(E,"adjustHue",function(){return wn}),r.d(E,"updateHue",function(){return Un}),r.d(E,"updateSaturation",function(){return xn}),r.d(E,"updateLightness",function(){return Gn});var T={};r.r(T),r.d(T,"repeatedPosition",function(){return Bn}),r.d(T,"closedPosition",function(){return kn}),r.d(T,"createPixelContext",function(){return jn}),r.d(T,"createImgDataFromImage",function(){return Hn});var I={};r.r(I),r.d(I,"noise1d",function(){return Yn}),r.d(I,"noise2d",function(){return er}),r.d(I,"noise3d",function(){return or}),r.d(I,"noise4d",function(){return ur}),r.d(I,"tileNoise",function(){return ir});var v={};r.r(v),r.d(v,"drawTileNoiseTexture",function(){return fr});var y={};r.r(y),r.d(y,"cartesianToPolar2D",function(){return ar}),r.d(y,"polarToCartesian2D",function(){return dr});var P={};r.r(P),r.d(P,"planeFromNormalAndCoplanarPoint",function(){return sr}),r.d(P,"planeFromThreeCoplanarPoints",function(){return lr}),r.d(P,"normalFromThreeCoplanarPoints",function(){return hr}),r.d(P,"mirrorMatrixFromPlane",function(){return pr}),r.d(P,"getYawQuat",function(){return gr}),r.d(P,"getPitchQuat",function(){return mr}),r.d(P,"getRollQuat",function(){return Ar});var D={};r.r(D),r.d(D,"deepmerge",function(){return Mr}),r.d(D,"deepOverride",function(){return Er});var F={};r.r(F),r.d(F,"v4",function(){return yr});const C=(t,n)=>t-n,L=(t,n)=>t.localeCompare(n);class N{constructor(t,n,r){this.parent=t,this.left=t,this.right=t,this.key=n,this.value=r}}const O=function(){const t={parent:null,left:null,right:null,key:null};return t.parent=t,t.left=t,t.right=t,t}();function b(t,n,r){n!==t.nil&&(b(t,n.left,r),r(n),b(t,n.right,r))}function R(t,n){if(n.right!==t.nil)return G(t,n.right);let r=n.parent;for(;r!==t.nil&&n===r.right;)n=r,r=r.parent;return r}function S(t,n){if(n.left!==t.nil)return B(t,n.right);let r=n.parent;for(;r!==t.nil&&n===r.left;)n=r,r=r.parent;return r}function _(t,n){let r=t.nil,e=t.root;for(;e!==t.nil;)r=e,e=t.compare(n.key,e.key)<0?e.left:e.right;n.parent=r,r===t.nil?t.root=n:t.compare(n.key,r.key)<0?r.left=n:r.right=n}function w(t,n,r){for(;n!==t.nil&&n.key!==r;)n=t.compare(r,n.key)<0?n.left:n.right;return n}function U(t,n,r){n.parent===t.nil?t.root=r:n===n.parent.left?n.parent.left=r:n.parent.right=r,r.parent=n.parent}function x(t,n){if(n.left===t.nil)U(t,n,n.right);else if(n.right===t.nil)U(t,n,n.left);else{const r=G(t,n.right);r.parent!==n&&(U(t,r,r.right),r.right=n.right,r.right.parent=r),U(t,n,r),r.left=n.left,r.left.parent=r}}function G(t,n){for(;n!==t.nil&&n.left!==t.nil;)n=n.left;return n}function B(t,n){for(;n.right!==t.nil;)n=n.right;return n}function k(t,n){const r=n.right;n.right=r.left,r.left!==t.nil&&(r.left.parent=n),r.parent=n.parent,n.parent===t.nil?t.root=r:n===n.parent.left?n.parent.left=r:n.parent.right=r,r.left=n,n.parent=r}function j(t,n){const r=n.left;n.left=r.right,r.right!==t.nil&&(r.right.parent=n),r.parent=n.parent,n.parent===t.nil?t.root=r:n===n.parent.right?n.parent.right=r:n.parent.left=r,r.right=n,n.parent=r}function H(t,n,r){if(n&&n!==t.nil)for(;n!==t.nil;)r(n),n=n.parent}class K{constructor(t,n=O){this.count=0,this.compare=t,this.root=n,this.nil=n}createNode(t,n){return new N(this.nil,t,n)}insert(t,n){const r=this.createNode(t,n);return _(this,r),this.count++,r}getNode(t){return w(this,this.root,t)}get(t){const n=this.getNode(t);return n===this.nil?n:n.value}keys(){const t=[];return b(this,this.root,n=>t.push(n.key)),t}min(){return G(this,this.root).key}max(){return B(this,this.root).key}remove(t){const n=w(this,this.root,t);n!==this.nil&&(x(this,n),this.count--)}size(){return this.count}}function q(t){return Math.floor(t/2)}function Y(t){return 2*t+1}function z(t){return 2*t}function Q(t,n,r){const e=r[t];r[t]=r[n],r[n]=e}function X(t,n,r){const e=z(r),o=Y(r);let u=r;e<n.length&&t(n[u],n[e])<0&&(u=e),o<n.length&&t(n[u],n[o])<0&&(u=o),u!==r&&(Q(r,u,n),X(t,n,u))}function W(t,n){for(let r=Math.floor((n.length-1)/2);r>=0;r--)X(t,n,r)}function V(t,n,r){if(n.push(r),n.length>1){let r=n.length-1,e=q(r);for(;r>0&&t(n[e],n[r])<0;)Q(e,r,n),e=q(r=e)}}function $(t){let n=[];return{size:function(){return n.length},fromArray:function(r){n=r.concat(),W(t,n)},pull:function(){const r=n.shift();return X(t,n,0),r},getTop:function(){return n[0]},insert:r=>V(t,n,r)}}class J extends N{constructor(t,n,r){super(t,n,r),this.red=!0}}const Z=Object.assign({},O,{red:!1});function tt(t,n){for(;n.parent.red;)if(n.parent===n.parent.parent.left){const r=n.parent.parent.right;r.red?(n.parent.red=!1,r.red=!1,n.parent.parent.red=!0,n=n.parent.parent):(n===n.parent.right&&k(t,n=n.parent),n.parent.red=!1,n.parent.parent.red=!0,j(t,n.parent.parent))}else{const r=n.parent.parent.left;r.red?(n.parent.red=!1,r.red=!1,n.parent.parent.red=!0,n=n.parent.parent):(n===n.parent.left&&j(t,n=n.parent),n.parent.red=!1,n.parent.parent.red=!0,k(t,n.parent.parent))}t.root.red=!1}function nt(t,n){let r,e=n,o=n.red;if(n.left===t.nil?(r=n.right,U(t,n,n.right)):n.right===t.nil?(r=n.left,U(t,n,n.left)):(o=(e=G(t,n.right)).red,r=e.right,e.parent===n?r.parent=e:(U(t,e,e.right),e.right=n.right,e.right.parent=e),U(t,n,e),e.left=n.left,e.left.parent=e,e.red=n.red),!o){for(;r!==t.root&&!r.red;)if(r===r.parent.left){let n=r.parent.right;n.red&&(n.red=!1,r.parent.red=!0,k(t,r.parent),n=r.parent.right),n.left.red||n.right.red?(n.right.red||(n.left.red=!1,n.red=!0,j(t,n),n=r.parent.right),n.red=r.parent.red,r.parent.red=!1,n.right.red=!1,k(t,r.parent),r=t.root):(n.red=!0,r=r.parent)}else{let n=r.parent.left;n.red&&(n.red=!1,r.parent.red=!0,j(t,r.parent),n=r.parent.left),n.left.red||n.right.red?(n.left.red||(n.right.red=!1,n.red=!0,k(t,n),n=r.parent.left),n.red=r.parent.red,r.parent.red=!1,n.left.red=!1,j(t,r.parent),r=t.root):(n.red=!0,r=r.parent)}r.red=!1}}class rt extends K{constructor(t,n=Z){super(t,n)}createNode(t,n){return new J(this.nil,t,n)}insert(t,n){const r=this.createNode(t,n);return _(this,r),tt(this,r),this.count++,r}remove(t){const n=w(this,this.root,t);n!==this.nil&&(nt(this,n),this.count--)}}function et(t){let n,r=!0;return requestAnimationFrame(function e(o){r&&(t(o-(n||o)),n=o,requestAnimationFrame(e))}),function(){r=!1}}function ot(t){let n=!0;return requestAnimationFrame(function r(e){n&&(t(e),requestAnimationFrame(r))}),function(){n=!1}}function ut(t=et){let n=[];function r(){for(const t in n)n[t].apply(null,arguments)}return{start:function(){this.stop=t(r)},stop:()=>{},step:r,addUpdate:function(t){n.push(t)},removeUpdate:function(t){n=n.filter(n=>n!==t)}}}function it(t){function n(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),function(){window.removeEventListener("resize",n)}}function ct(){const t={size:{width:0,height:0}},n=it(n=>t.size=n);return{state:t,destroy:n}}var ft;function at(t,n){const r=n||t,{element:e=window}=t,o={};function u(t){o[t.keyCode]=Date.now(),r(o)}function i(t){delete o[t.keyCode],r(o)}return e.addEventListener("keyup",i,!1),e.addEventListener("keydown",u,!1),r(o),function(){e.removeEventListener("keyup",i),e.removeEventListener("keydown",u)}}function dt(t){const n={Keys:ft,state:{pressed:{}},destroy:()=>{}};return n.destroy=at(function(t){n.state.pressed=t},t),n}!function(t){t[t.CANCEL=3]="CANCEL",t[t.HELP=6]="HELP",t[t.BACK_SPACE=8]="BACK_SPACE",t[t.TAB=9]="TAB",t[t.CLEAR=12]="CLEAR",t[t.RETURN=13]="RETURN",t[t.ENTER=14]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CONTROL=17]="CONTROL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESCAPE=27]="ESCAPE",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.PRINTSCREEN=44]="PRINTSCREEN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_1=49]="DIGIT_1",t[t.DIGIT_2=50]="DIGIT_2",t[t.DIGIT_3=51]="DIGIT_3",t[t.DIGIT_4=52]="DIGIT_4",t[t.DIGIT_5=53]="DIGIT_5",t[t.DIGIT_6=54]="DIGIT_6",t[t.DIGIT_7=55]="DIGIT_7",t[t.DIGIT_8=56]="DIGIT_8",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.EQUALS=61]="EQUALS",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.CONTEXT_MENU=93]="CONTEXT_MENU",t[t.NUMPAD0=96]="NUMPAD0",t[t.NUMPAD1=97]="NUMPAD1",t[t.NUMPAD2=98]="NUMPAD2",t[t.NUMPAD3=99]="NUMPAD3",t[t.NUMPAD4=100]="NUMPAD4",t[t.NUMPAD5=101]="NUMPAD5",t[t.NUMPAD6=102]="NUMPAD6",t[t.NUMPAD7=103]="NUMPAD7",t[t.NUMPAD8=104]="NUMPAD8",t[t.NUMPAD9=105]="NUMPAD9",t[t.MULTIPLY=106]="MULTIPLY",t[t.ADD=107]="ADD",t[t.SEPARATOR=108]="SEPARATOR",t[t.SUBTRACT=109]="SUBTRACT",t[t.DECIMAL=110]="DECIMAL",t[t.DIVIDE=111]="DIVIDE",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.F13=124]="F13",t[t.F14=125]="F14",t[t.F15=126]="F15",t[t.F16=127]="F16",t[t.F17=128]="F17",t[t.F18=129]="F18",t[t.F19=130]="F19",t[t.F20=131]="F20",t[t.F21=132]="F21",t[t.F22=133]="F22",t[t.F23=134]="F23",t[t.F24=135]="F24",t[t.NUM_LOCK=144]="NUM_LOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.COMMA=188]="COMMA",t[t.PERIOD=190]="PERIOD",t[t.SLASH=191]="SLASH",t[t.BACK_QUOTE=192]="BACK_QUOTE",t[t.OPEN_BRACKET=219]="OPEN_BRACKET",t[t.BACK_SLASH=220]="BACK_SLASH",t[t.CLOSE_BRACKET=221]="CLOSE_BRACKET",t[t.QUOTE=222]="QUOTE",t[t.META=224]="META"}(ft||(ft={}));const st={LEFT:0,MIDDLE:1,RIGHT:2};function lt(t,n){const r=n||t,{element:e=document,enableRightButton:o}=t,u={pressed:{},drag:{x:0,y:0,dX:0,dY:0},dragging:!1};let i=0,c=0,f=0,a=0;function d(t){u.pressed[t.button]=t,t.button===st.LEFT&&(i=f=t.clientX,c=a=t.clientY,u.dragging=!0),r(u)}function s(t){delete u.pressed[t.button],delete u.drag.event,u.drag.x=0,u.drag.y=0,u.drag.dX=0,u.drag.dY=0,u.dragging=!1,r(u)}function l(t){u.dragging&&(u.drag.event=t,u.drag.x=i-t.clientX,u.drag.y=c-t.clientY,u.drag.dX=f-t.clientX,u.drag.dY=a-t.clientY,f=t.clientX,a=t.clientY,r(u))}function h(t){t.preventDefault()}return e.addEventListener("mousedown",d),document.addEventListener("mouseup",s),document.addEventListener("mousemove",l),o&&e.addEventListener("contextmenu",h),r(u),function(){e.removeEventListener("mousedown",d),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",s),o&&e.removeEventListener("contextmenu",h)}}function ht(t={}){const n={Buttons:st,state:{},destroy:()=>{}};return n.destroy=lt(t,function(t){n.state=t}),n}function pt(t){return function(n,r){return void 0!==r?t(n,r):r=>t(n,r)}}function gt(t,...n){return t.bind(null,...n)}function mt(t){return t>0?1:t<0?-1:0}function At(t,n,r){return n+t*(r-n)}function Mt(t,n,r){return Math.max(t,Math.min(r,n))}const Et=Math.PI/180;function Tt(t){return t*Et}const It=(t,n)=>(r,e)=>t(r,e)&&n(r,e),vt=t=>(n,r)=>!t(n,r),yt=t=>null!=t,Pt=t=>t&&t.length,Dt=(t,n)=>t!==n,Ft=(t,n)=>t===n;function Ct(t,n){if(t===n)return!0;if(!n||!t)return!1;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function Lt(t,n){if(t===n)return!0;if(!n)return!1;const r=Object.keys(t);if(!Ct(r,Object.keys(n)))return!1;for(const e of r)if(t[e]!==n[e])return!1;return!0}function Nt(t){return new Float32Array(t)}function Ot(t,n,r=[]){for(let e=0;e<t.length;e++)r[e]=t[e]+n[e];return r}function bt(t,n,r=[]){for(let e=0;e<t.length;e++)r[e]=t[e]-n[e];return r}function Rt(t,n,r=[]){for(let e=0;e<n.length;e++)r[e]=n[e]*t;return r}function St(t,n,r=[]){for(let e=0;e<n.length;e++)r[e]=n[e]/t;return r}function _t(t){let n=0;for(let r=0;r<t.length;r++){const e=t[r];n+=e*e}return Math.sqrt(n)}function wt(t,n=[]){return St(_t(t),t,n)}function Ut(t,n){const r=_t(n);return t<r?Rt(t/r,n):n}function xt(t,n){let r=0;for(let e=0;e<t.length;e++)r+=t[e]*n[e];return r}function Gt(t,n,r=[]){return r[0]=t[1]*n[2]-t[2]*n[1],r[1]=t[2]*n[0]-t[0]*n[2],r[2]=t[0]*n[1]-t[1]*n[0],r}function Bt(t,n){return t[0]*n[1]-t[1]*n[0]}const kt=Ct;function jt(t){return Math.floor(Math.random()*t)}function Ht(t,n){return jt(n-t)+t}function Kt(){return(Math.random()+Math.random()+Math.random())/3}function qt(t){return t[jt(t.length)]}function Yt(t,n){for(let r=0;r<n;r++)t(r)}function zt(t,n,r=[]){for(let e=0;e<n;e++)r[e]=t(e);return r}function Qt(t,n,r,e=[]){const o=Math.min(n.length,r.length);for(let u=0;u<o;u++)e[u]=t(n[u],r[u]);return e}function Xt(t,n=[]){for(const r of t){const t=n.length;for(let e=0;e<r.length;e++)n[e+t]=r[e]}return n}function Wt(t,n,r=[]){return Xt(n.map(t),r)}function Vt(t){const n=[];for(let r=0;r<t.length;r++){const e=Ht(r,t.length),o=void 0!==n[r]?n[r]:t[r];n[r]=void 0!==n[e]?n[e]:t[e],n[e]=o}return n}function $t(t,n){if(Array.isArray(n))return n.map(t);{const r={};for(const e in n)r[e]=t(n[e],e);return r}}function Jt(t,n){for(const r in n)t(n[r],r)}function Zt(t,n,r,e){return Qt(gt(t,n),r,e)}const tn=gt(Zt,At);function nn(t,[n,r]){const e=tn(t,n,r);return[[n,e],[e,r]]}function rn(t,n){return n.map(n=>Ot(t,n))}function en(t){return t.unshift(t.pop()),t}function on(t){return t.push(t.shift()),t}function un(t){return en(t.concat())}function cn(t){return on(t.concat())}function fn(t){return wt(Gt(bt(t[0],t[1]),bt(t[2],t[1])))}function an(t,n){return Bt(bt(n,t[0]),bt(t[1],t[0]))}function dn(t){return[t[0],t[1]]}function sn(t){return[t[1],t[2]]}function ln(t){return[t[2],t[3]]}function hn(t){return[t[3],t[0]]}function pn(t,n){return t.concat(un(n))}function gn(t,n){return pn(rn(t,n),n)}function mn(t,n){return un(gn(t,n))}function An(t,n){return pn(n,rn(t,n))}function Mn(t,n){return un(An(t,n))}function En(t,n,[r,e,o,u]){const i=tn(t,r,u),c=tn(n,e,o);return[[r,e,c,i],[i,c,o,u]]}function Tn(t,n,[r,e,o,u]){const i=tn(t,r,e),c=tn(n,u,o);return[[r,i,c,u],[i,e,o,c]]}const In=[[0,2,1],[0,3,2]];function vn(t){return Xt(zt(t=>In.map(n=>n.map(n=>4*t+n)),t))}const yn=[0,0,0,255],Pn=[255,255,255,255];function Dn([t,n,r,e],[o,u,i,c]){const f=c/255;return[Math.floor(At(f,t,o)),Math.floor(At(f,n,u)),Math.floor(At(f,r,i)),e]}function Fn(t,n){return null==n&&(n=255),[t,t,t,n]}function Cn([t,n,r,e]){return"rgba("+t+", "+n+", "+r+", "+e/255+")"}function Ln(t){return t.map(t=>t/255)}function Nn(t){return t.map(t=>Math.floor(255*t))}function On(t){return[(t=Math.floor(t))>>16&255,t>>8&255,255&t]}function bn([t,n,r]){return"#"+((1<<24)+(t<<16)+(n<<8)+r).toString(16).slice(1)}function Rn(t){return 3===(t=t.replace(/^\s*#|\s*$/g,"")).length&&(t=t.replace(/(.)/g,"$1$1")),On(parseInt(t,16))}function Sn([t,n,r]){const e=Math.max(t,n,r),o=Math.min(t,n,r),u=e-o,i=(e+o)/2;let c=0,f=0;return c=0===u?0:e===t?(n-r)/u%6/6:e===n?((r-t)/u+2)/6:((t-n)/u+4)/6,f=0===u?0:u/(1-Math.abs(2*i-1)),{h:wn(c),s:f,l:i}}function _n({h:t,s:n,l:r}){const e=(1-Math.abs(2*r-1))*n,o=e*(1-Math.abs(6*t%2-1)),u=r-e/2;let i,c,f;return t<1/6?(i=e,c=o,f=0):t<2/6?(i=o,c=e,f=0):t<.5?(i=0,c=e,f=o):t<4/6?(i=0,c=o,f=e):t<5/6?(i=o,c=0,f=e):(i=e,c=0,f=o),[i=Mt(0,1,i+u),c=Mt(0,1,c+u),f=Mt(0,1,f+u)]}function wn(t){return t>=1?t-1:t<0?t+1:t}function Un(t,n){return Object.assign({},t,{h:wn(t.h+n)})}function xn(t,n){return Object.assign({},t,{s:Mt(0,1,t.s+n)})}function Gn(t,n){return Object.assign({},t,{l:Mt(0,1,t.l+n)})}function Bn([t,n],r){const e=r.width,o=r.height;return t>=e&&(t-=e),n>=o&&(n-=o),t<0&&(t+=e),n<0&&(n+=o),[t,n]}function kn([t,n],r){const e=r.width,o=r.height;return t<0&&(t=0),n<0&&(n=0),t>=e&&(t=e),n>=o&&(n=o),[t,n]}function jn(t){function n(n,r){const[e,o]=t(r,n);return 4*(o*n.height+e)}function r(t,r){const e=n(t,r);return[t.data[e],t.data[e+1],t.data[e+2],t.data[e+3]]}function e(t,r,e){const o=n(t,r);t.data[o]=e[0],t.data[o+1]=e[1],t.data[o+2]=e[2],t.data[o+3]=e[3]}return t=t||kn,{getPixelIndex:n,getColorAt:r,setColorAt:e,increaseAllBy:function(t,[n,r,e,o]){const u=t.data;for(let t=0;t<u.length;t+=4)u[t]+n<256&&(u[t]+=n),u[t+1]+r<256&&(u[t+1]+=r),u[t+2]+e<256&&(u[t+2]+=e),u[t+3]+o<256&&(u[t+3]+=o)},decreaseAllBy:function(t,[n,r,e,o]){const u=t.data;for(let t=0;t<=u.length;t+=4)n<=u[t]&&(u[t]-=n),r<=u[t+1]&&(u[t+1]-=r),e<=u[t+2]&&(u[t+2]-=e),o<=u[t+3]&&(u[t+3]-=o)},mixinColor:function(t,n){for(let o=0;o<t.width;o++)for(let u=0;o<t.height;u++)e(t,[o,u],Dn(r(t,[o,u]),n))},replaceWithImageDataAt:function(t,n,[o,u]){const i=n.width-1,c=n.height-1;for(let f=0;f<c;f++)for(let c=0;c<i;c++)e(t,[o+c,u+f],r(n,[c,f]))},drawImageAt:function(t,n,[o,u]){const i=n.width-1,c=n.height-1;for(let f=0;f<c;f++)for(let c=0;c<i;c++)e(t,[o+c,u+f],Dn(r(t,[o+c,u+f]),r(n,[c,f])))}}}function Hn(t){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");if(r)return r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)}const Kn=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let t=0;t<=256;t++)Kn[256+t]=Kn[t];function qn(t,n){return 0==(1&t)?n:-n}function Yn(t){let n,r,e;return n=255&(r=~~t),At(e=function(t){return t*t*t*(t*(6*t-15)+10)}(t-=r),qn(Kn[n],t),qn(Kn[n+1],t-1))}const zn=.5*(Math.sqrt(3)-1),Qn=(3-Math.sqrt(3))/6,Xn=1/3,Wn=1/6,Vn=(Math.sqrt(5)-1)/4,$n=(5-Math.sqrt(5))/20,Jn=new Uint8Array(256),Zn=new Uint8Array(512),tr=new Uint8Array(512);for(let t=0;t<256;t++)Jn[t]=256*Math.random();for(let t=0;t<512;t++)Zn[t]=Jn[255&t],tr[t]=Zn[t]%12;const nr=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),rr=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function er(t,n){let r=0,e=0,o=0;const u=(t+n)*zn,i=Math.floor(t+u),c=Math.floor(n+u),f=(i+c)*Qn,a=t-(i-f),d=n-(c-f);let s,l;a>d?(s=1,l=0):(s=0,l=1);const h=a-s+Qn,p=d-l+Qn,g=a-1+2*Qn,m=d-1+2*Qn,A=255&i,M=255&c;let E=.5-a*a-d*d;if(E>=0){const t=3*tr[A+Zn[M]];r=(E*=E)*E*(nr[t]*a+nr[t+1]*d)}let T=.5-h*h-p*p;if(T>=0){const t=3*tr[A+s+Zn[M+l]];e=(T*=T)*T*(nr[t]*h+nr[t+1]*p)}let I=.5-g*g-m*m;if(I>=0){const t=3*tr[A+1+Zn[M+1]];o=(I*=I)*I*(nr[t]*g+nr[t+1]*m)}return 70*(r+e+o)}function or(t,n,r){let e,o,u,i;const c=(t+n+r)*Xn,f=Math.floor(t+c),a=Math.floor(n+c),d=Math.floor(r+c),s=(f+a+d)*Wn,l=t-(f-s),h=n-(a-s),p=r-(d-s);let g,m,A,M,E,T;l>=h?h>=p?(g=1,m=0,A=0,M=1,E=1,T=0):l>=p?(g=1,m=0,A=0,M=1,E=0,T=1):(g=0,m=0,A=1,M=1,E=0,T=1):h<p?(g=0,m=0,A=1,M=0,E=1,T=1):l<p?(g=0,m=1,A=0,M=0,E=1,T=1):(g=0,m=1,A=0,M=1,E=1,T=0);const I=l-g+Wn,v=h-m+Wn,y=p-A+Wn,P=l-M+2*Wn,D=h-E+2*Wn,F=p-T+2*Wn,C=l-1+3*Wn,L=h-1+3*Wn,N=p-1+3*Wn,O=255&f,b=255&a,R=255&d;let S=.6-l*l-h*h-p*p;if(S<0)e=0;else{const t=3*tr[O+Zn[b+Zn[R]]];e=(S*=S)*S*(nr[t]*l+nr[t+1]*h+nr[t+2]*p)}let _=.6-I*I-v*v-y*y;if(_<0)o=0;else{const t=3*tr[O+g+Zn[b+m+Zn[R+A]]];o=(_*=_)*_*(nr[t]*I+nr[t+1]*v+nr[t+2]*y)}let w=.6-P*P-D*D-F*F;if(w<0)u=0;else{const t=3*tr[O+M+Zn[b+E+Zn[R+T]]];u=(w*=w)*w*(nr[t]*P+nr[t+1]*D+nr[t+2]*F)}let U=.6-C*C-L*L-N*N;if(U<0)i=0;else{const t=3*tr[O+1+Zn[b+1+Zn[R+1]]];i=(U*=U)*U*(nr[t]*C+nr[t+1]*L+nr[t+2]*N)}return 32*(e+o+u+i)}function ur(t,n,r,e){let o,u,i,c,f;const a=(t+n+r+e)*Vn,d=Math.floor(t+a),s=Math.floor(n+a),l=Math.floor(r+a),h=Math.floor(e+a),p=(d+s+l+h)*$n,g=t-(d-p),m=n-(s-p),A=r-(l-p),M=e-(h-p);let E,T,I,v,y,P,D,F,C,L,N,O,b=0,R=0,S=0,_=0;g>m?b++:R++,g>A?b++:S++,g>M?b++:_++,m>A?R++:S++,m>M?R++:_++,A>M?S++:_++;const w=g-(E=b>=3?1:0)+$n,U=m-(T=R>=3?1:0)+$n,x=A-(I=S>=3?1:0)+$n,G=M-(v=_>=3?1:0)+$n,B=g-(y=b>=2?1:0)+2*$n,k=m-(P=R>=2?1:0)+2*$n,j=A-(D=S>=2?1:0)+2*$n,H=M-(F=_>=2?1:0)+2*$n,K=g-(C=b>=1?1:0)+3*$n,q=m-(L=R>=1?1:0)+3*$n,Y=A-(N=S>=1?1:0)+3*$n,z=M-(O=_>=1?1:0)+3*$n,Q=g-1+4*$n,X=m-1+4*$n,W=A-1+4*$n,V=M-1+4*$n,$=255&d,J=255&s,Z=255&l,tt=255&h;let nt=.6-g*g-m*m-A*A-M*M;if(nt<0)o=0;else{const t=Zn[$+Zn[J+Zn[Z+Zn[tt]]]]%32*4;o=(nt*=nt)*nt*(rr[t]*g+rr[t+1]*m+rr[t+2]*A+rr[t+3]*M)}let rt=.6-w*w-U*U-x*x-G*G;if(rt<0)u=0;else{const t=Zn[$+E+Zn[J+T+Zn[Z+I+Zn[tt+v]]]]%32*4;u=(rt*=rt)*rt*(rr[t]*w+rr[t+1]*U+rr[t+2]*x+rr[t+3]*G)}let et=.6-B*B-k*k-j*j-H*H;if(et<0)i=0;else{const t=Zn[$+y+Zn[J+P+Zn[Z+D+Zn[tt+F]]]]%32*4;i=(et*=et)*et*(rr[t]*B+rr[t+1]*k+rr[t+2]*j+rr[t+3]*H)}let ot=.6-K*K-q*q-Y*Y-z*z;if(ot<0)c=0;else{const t=Zn[$+C+Zn[J+L+Zn[Z+N+Zn[tt+O]]]]%32*4;c=(ot*=ot)*ot*(rr[t]*K+rr[t+1]*q+rr[t+2]*Y+rr[t+3]*z)}let ut=.6-Q*Q-X*X-W*W-V*V;if(ut<0)f=0;else{const t=Zn[$+1+Zn[J+1+Zn[Z+1+Zn[tt+1]]]]%32*4;f=(ut*=ut)*ut*(rr[t]*Q+rr[t+1]*X+rr[t+2]*W+rr[t+3]*V)}return 27*(o+u+i+c+f)}function ir(t,n,r,e){const o=[];for(let u=0;u<n;u++)for(let i=0;i<t;i++){const c=i/t,f=u/n,a=Math.cos(2*c*Math.PI)*r/(2*Math.PI),d=Math.cos(2*f*Math.PI)*e/(2*Math.PI),s=Math.sin(2*c*Math.PI)*r/(2*Math.PI),l=Math.sin(2*f*Math.PI)*e/(2*Math.PI);o.push(ur(a,d,s,l))}return o}function cr(t){return Math.floor(127*(t+1))}function fr(t,n,r){const e=r.canvas.width,o=r.canvas.height,u=ir(e,o,t,n),i=ir(e,o,2.1*t,2.1*n),c=ir(e,o,4.2*t,4.2*n),f=ir(e,o,8.3*t,8.3*n),a=r.getImageData(0,0,e,o);for(let t=0;t<u.length-1;t++){const n=4*t;a.data[n]=cr(u[t]),a.data[n+1]=cr(i[t]),a.data[n+2]=cr(c[t]),a.data[n+3]=cr(f[t])}r.putImageData(a,0,0)}function ar(t){return[_t(t),Math.atan2(t[1],t[0])]}function dr(t){const n=t[0],r=t[1];return[n*Math.cos(r),n*Math.sin(r)]}function sr(t,n){const r=xt(t,n);return[t[0],t[1],t[2],-r]}function lr(t,n,r){return sr(hr(t,n,r),t)}function hr(t,n,r){return wt(Gt(bt(r,n),bt(t,n)))}function pr(t){const[n,r,e,o]=t;return[1-2*n*n,-2*n*r,-2*n*e,0,-2*n*r,1-2*r*r,-2*r*e,0,-2*n*e,-2*r*e,1-2*e*e,0,-2*n*o,-2*r*o,-2*e*o,1]}function gr(t){return t*=.5,[0,Math.sin(t),0,Math.cos(t)]}function mr(t){return t*=.5,[Math.sin(t),0,0,Math.cos(t)]}function Ar(t){return t*=.5,[0,0,Math.sin(t),Math.cos(t)]}function Mr(t,n){if("object"==typeof t&&"object"==typeof n&&!Array.isArray(t)&&!Array.isArray(n)&&t!==n){const r=Object.assign({},t);for(const e in n){const o=t[e],u=n[e];void 0!==u?r[e]=Mr(o,u):delete r[e]}return r}return n}function Er(t,n,r){const e=r&&r.ignore;if("object"==typeof t&&"object"==typeof n&&!Array.isArray(t)&&!Array.isArray(n)&&t!==n){for(const r in t)if(t.hasOwnProperty(r)&&!(e&&r in e&&!0===e[r])){const o=t[r],u=n[r];void 0!==u&&(t[r]=Er(o,u,{ignore:e&&e[r]}))}return t}return n}const Tr=new Array(16);const Ir=[],vr={};for(let t=0;t<256;t++)Ir[t]=(t+256).toString(16).substr(1),vr[Ir[t]]=t;function yr(){const t=function(){for(let t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random(),Tr[n]=t>>>((3&n)<<3)&255);return Tr}();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(t){const n=Ir;let r=0;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}(t)}r.d(n,"math",function(){return Pr}),r.d(n,"events",function(){return Dr}),r.d(n,"utils",function(){return Fr}),r.d(n,"fp",function(){return Cr}),r.d(n,"graphics",function(){return Lr}),r.d(n,"geometry",function(){return Nr}),r.d(n,"algorithms",function(){return Or}),r.d(n,"datastructures",function(){return br});const Pr={core:l,noise:I,coords:y,vectors:p,geometry:P,random:g},Dr={dom:f,mouse:d,keyboard:a,animation:c},Fr={uuid:F,seq:m,predicates:h,object:D},Cr={core:s},Lr={colors:E,pixels:T,textures:v},Nr={primitives:A,quad:M},Or={base:e},br={bintree:o,rbtree:i,heap:u};n.default={math:Pr,events:Dr,utils:Fr,graphics:Lr,fp:Cr,geometry:Nr,datastructures:br,algorithms:Or}}])});