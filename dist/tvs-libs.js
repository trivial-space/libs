!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.tvsLibs=n():t.tvsLibs=n()}(window,function(){return function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=0)}([function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"sign",function(){return C}),r.d(e,"lerp",function(){return L}),r.d(e,"clamp",function(){return N}),r.d(e,"DEG_TO_RAD_FACTOR",function(){return O}),r.d(e,"degToRad",function(){return b});var o={};r.r(o),r.d(o,"and",function(){return R}),r.d(o,"not",function(){return S}),r.d(o,"defined",function(){return _}),r.d(o,"notEmpty",function(){return w}),r.d(o,"unequal",function(){return U}),r.d(o,"equal",function(){return x}),r.d(o,"equalArray",function(){return G}),r.d(o,"equalObject",function(){return B});var u={};r.r(u),r.d(u,"vec",function(){return k}),r.d(u,"add",function(){return j}),r.d(u,"sub",function(){return H}),r.d(u,"mul",function(){return K}),r.d(u,"div",function(){return q}),r.d(u,"length",function(){return Y}),r.d(u,"normalize",function(){return z}),r.d(u,"limit",function(){return Q}),r.d(u,"dot",function(){return X}),r.d(u,"cross",function(){return W}),r.d(u,"cross2D",function(){return V}),r.d(u,"isEqual",function(){return $});var i={};r.r(i),r.d(i,"cartesianToPolar2D",function(){return J}),r.d(i,"polarToCartesian2D",function(){return Z});var c={};r.r(c),r.d(c,"noise1d",function(){return rt}),r.d(c,"noise2d",function(){return pt}),r.d(c,"noise3d",function(){return gt}),r.d(c,"noise4d",function(){return mt}),r.d(c,"tileNoise",function(){return At});var f={};r.r(f),r.d(f,"planeFromNormalAndCoplanarPoint",function(){return Mt}),r.d(f,"planeFromThreeCoplanarPoints",function(){return Et}),r.d(f,"normalFromThreeCoplanarPoints",function(){return Tt}),r.d(f,"mirrorMatrixFromPlane",function(){return It}),r.d(f,"getYawQuat",function(){return vt}),r.d(f,"getPitchQuat",function(){return yt}),r.d(f,"getRollQuat",function(){return Pt});var a={};r.r(a),r.d(a,"randInt",function(){return Dt}),r.d(a,"randIntInRange",function(){return Ft}),r.d(a,"normalRand",function(){return Ct});var d={};r.r(d),r.d(d,"windowSize",function(){return Lt}),r.d(d,"windowSizeObserver",function(){return Nt});var s={};r.r(s),r.d(s,"Keys",function(){return Ot}),r.d(s,"keyboard",function(){return bt}),r.d(s,"keyboardObserver",function(){return Rt});var l={};r.r(l),r.d(l,"Buttons",function(){return St}),r.d(l,"mouse",function(){return _t}),r.d(l,"mouseObserver",function(){return wt});var h={};r.r(h),r.d(h,"animateWithTPF",function(){return Ut}),r.d(h,"animate",function(){return xt}),r.d(h,"createAnimator",function(){return Gt});var p={};r.r(p),r.d(p,"v4",function(){return Ht});var g={};r.r(g),r.d(g,"pickRandom",function(){return Kt}),r.d(g,"doTimes",function(){return qt}),r.d(g,"times",function(){return Yt}),r.d(g,"zip",function(){return zt}),r.d(g,"flatten",function(){return Qt}),r.d(g,"mapcat",function(){return Xt}),r.d(g,"shuffle",function(){return Wt}),r.d(g,"map",function(){return Vt}),r.d(g,"each",function(){return $t});var m={};r.r(m),r.d(m,"deepmerge",function(){return Jt}),r.d(m,"deepOverride",function(){return Zt});var A={};r.r(A),r.d(A,"curry",function(){return tn}),r.d(A,"partial",function(){return nn});var M={};r.r(M),r.d(M,"BLACK",function(){return rn}),r.d(M,"WHITE",function(){return en}),r.d(M,"mixColors",function(){return on}),r.d(M,"grey",function(){return un}),r.d(M,"colorRgbaToCSS",function(){return cn}),r.d(M,"intToFloat",function(){return fn}),r.d(M,"floatToInt",function(){return an}),r.d(M,"hexToRgb",function(){return dn}),r.d(M,"rgbToHexString",function(){return sn}),r.d(M,"hexStringToRgb",function(){return ln}),r.d(M,"rgbToHSL",function(){return hn}),r.d(M,"hslToRGB",function(){return pn}),r.d(M,"adjustHue",function(){return gn}),r.d(M,"updateHue",function(){return mn}),r.d(M,"updateSaturation",function(){return An}),r.d(M,"updateLightness",function(){return Mn});var E={};r.r(E),r.d(E,"drawTileNoiseTexture",function(){return Tn});var T={};r.r(T),r.d(T,"repeatedPosition",function(){return In}),r.d(T,"closedPosition",function(){return vn}),r.d(T,"createPixelContext",function(){return yn}),r.d(T,"createImgDataFromImage",function(){return Pn});var I={};r.r(I),r.d(I,"numericalCompare",function(){return Dn}),r.d(I,"stringCompare",function(){return Fn});var v={};r.r(v),r.d(v,"Node",function(){return Cn}),r.d(v,"nil",function(){return Ln}),r.d(v,"walkInOrder",function(){return Nn}),r.d(v,"next",function(){return On}),r.d(v,"prev",function(){return bn}),r.d(v,"insert",function(){return Rn}),r.d(v,"search",function(){return Sn}),r.d(v,"transplant",function(){return _n}),r.d(v,"remove",function(){return wn}),r.d(v,"min",function(){return Un}),r.d(v,"max",function(){return xn}),r.d(v,"rotateLeft",function(){return Gn}),r.d(v,"rotateRight",function(){return Bn}),r.d(v,"walkToRoot",function(){return kn}),r.d(v,"BinaryTree",function(){return jn});var y={};r.r(y),r.d(y,"RBNode",function(){return Hn}),r.d(y,"rbNil",function(){return Kn}),r.d(y,"insertFixup",function(){return qn}),r.d(y,"remove",function(){return Yn}),r.d(y,"RBTree",function(){return zn});var P={};r.r(P),r.d(P,"parentIndex",function(){return Qn}),r.d(P,"rightIndex",function(){return Xn}),r.d(P,"leftIndex",function(){return Wn}),r.d(P,"heapifyAt",function(){return $n}),r.d(P,"heapify",function(){return Jn}),r.d(P,"insert",function(){return Zn}),r.d(P,"createHeap",function(){return tr});var D={};r.r(D),r.d(D,"interpolate",function(){return nr}),r.d(D,"lerpVecs",function(){return rr}),r.d(D,"split",function(){return er}),r.d(D,"translate",function(){return or}),r.d(D,"rotateLeftInPlace",function(){return ur}),r.d(D,"rotateRightInPlace",function(){return ir}),r.d(D,"rotateLeft",function(){return cr}),r.d(D,"rotateRight",function(){return fr}),r.d(D,"normal",function(){return ar}),r.d(D,"side",function(){return dr});var F={};function C(t){return t>0?1:t<0?-1:0}function L(t,n,r){return n+t*(r-n)}function N(t,n,r){return Math.max(t,Math.min(r,n))}r.r(F),r.d(F,"top",function(){return sr}),r.d(F,"right",function(){return lr}),r.d(F,"bottom",function(){return hr}),r.d(F,"left",function(){return pr}),r.d(F,"combineEdges",function(){return gr}),r.d(F,"extrudeTop",function(){return mr}),r.d(F,"extrudeRight",function(){return Ar}),r.d(F,"extrudeBottom",function(){return Mr}),r.d(F,"extrudeLeft",function(){return Er}),r.d(F,"divideHorizontal",function(){return Tr}),r.d(F,"divideVertical",function(){return Ir}),r.d(F,"quadTriangles",function(){return vr}),r.d(F,"triangulate",function(){return yr});const O=Math.PI/180;function b(t){return t*O}const R=(t,n)=>(r,e)=>t(r,e)&&n(r,e),S=t=>(n,r)=>!t(n,r),_=t=>null!=t,w=t=>t&&t.length,U=(t,n)=>t!==n,x=(t,n)=>t===n;function G(t,n){if(t===n)return!0;if(!n)return!1;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function B(t,n){if(t===n)return!0;if(!n)return!1;const r=Object.keys(t);if(!G(r,Object.keys(n)))return!1;for(const e of r)if(t[e]!==n[e])return!1;return!0}function k(t){return new Float32Array(t)}function j(t,n,r=[]){for(let e=0;e<t.length;e++)r[e]=t[e]+n[e];return r}function H(t,n,r=[]){for(let e=0;e<t.length;e++)r[e]=t[e]-n[e];return r}function K(t,n,r=[]){for(let e=0;e<n.length;e++)r[e]=n[e]*t;return r}function q(t,n,r=[]){for(let e=0;e<n.length;e++)r[e]=n[e]/t;return r}function Y(t){let n=0;for(let r=0;r<t.length;r++){const e=t[r];n+=e*e}return Math.sqrt(n)}function z(t,n=[]){return q(Y(t),t,n)}function Q(t,n){const r=Y(n);return t<r?K(t/r,n):n}function X(t,n){let r=0;for(let e=0;e<t.length;e++)r+=t[e]*n[e];return r}function W(t,n,r=[]){return r[0]=t[1]*n[2]-t[2]*n[1],r[1]=t[2]*n[0]-t[0]*n[2],r[2]=t[0]*n[1]-t[1]*n[0],r}function V(t,n){return t[0]*n[1]-t[1]*n[0]}const $=G;function J(t){return[Y(t),Math.atan2(t[1],t[0])]}function Z(t){const n=t[0],r=t[1];return[n*Math.cos(r),n*Math.sin(r)]}const tt=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let t=0;t<=256;t++)tt[256+t]=tt[t];function nt(t,n){return 0==(1&t)?n:-n}function rt(t){let n,r,e;return n=255&(r=~~t),L(e=function(t){return t*t*t*(t*(6*t-15)+10)}(t-=r),nt(tt[n],t),nt(tt[n+1],t-1))}const et=.5*(Math.sqrt(3)-1),ot=(3-Math.sqrt(3))/6,ut=1/3,it=1/6,ct=(Math.sqrt(5)-1)/4,ft=(5-Math.sqrt(5))/20,at=new Uint8Array(256),dt=new Uint8Array(512),st=new Uint8Array(512);for(let t=0;t<256;t++)at[t]=256*Math.random();for(let t=0;t<512;t++)dt[t]=at[255&t],st[t]=dt[t]%12;const lt=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),ht=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function pt(t,n){let r=0,e=0,o=0;const u=(t+n)*et,i=Math.floor(t+u),c=Math.floor(n+u),f=(i+c)*ot,a=t-(i-f),d=n-(c-f);let s,l;a>d?(s=1,l=0):(s=0,l=1);const h=a-s+ot,p=d-l+ot,g=a-1+2*ot,m=d-1+2*ot,A=255&i,M=255&c;let E=.5-a*a-d*d;if(E>=0){const t=3*st[A+dt[M]];r=(E*=E)*E*(lt[t]*a+lt[t+1]*d)}let T=.5-h*h-p*p;if(T>=0){const t=3*st[A+s+dt[M+l]];e=(T*=T)*T*(lt[t]*h+lt[t+1]*p)}let I=.5-g*g-m*m;if(I>=0){const t=3*st[A+1+dt[M+1]];o=(I*=I)*I*(lt[t]*g+lt[t+1]*m)}return 70*(r+e+o)}function gt(t,n,r){let e,o,u,i;const c=(t+n+r)*ut,f=Math.floor(t+c),a=Math.floor(n+c),d=Math.floor(r+c),s=(f+a+d)*it,l=t-(f-s),h=n-(a-s),p=r-(d-s);let g,m,A,M,E,T;l>=h?h>=p?(g=1,m=0,A=0,M=1,E=1,T=0):l>=p?(g=1,m=0,A=0,M=1,E=0,T=1):(g=0,m=0,A=1,M=1,E=0,T=1):h<p?(g=0,m=0,A=1,M=0,E=1,T=1):l<p?(g=0,m=1,A=0,M=0,E=1,T=1):(g=0,m=1,A=0,M=1,E=1,T=0);const I=l-g+it,v=h-m+it,y=p-A+it,P=l-M+2*it,D=h-E+2*it,F=p-T+2*it,C=l-1+3*it,L=h-1+3*it,N=p-1+3*it,O=255&f,b=255&a,R=255&d;let S=.6-l*l-h*h-p*p;if(S<0)e=0;else{const t=3*st[O+dt[b+dt[R]]];e=(S*=S)*S*(lt[t]*l+lt[t+1]*h+lt[t+2]*p)}let _=.6-I*I-v*v-y*y;if(_<0)o=0;else{const t=3*st[O+g+dt[b+m+dt[R+A]]];o=(_*=_)*_*(lt[t]*I+lt[t+1]*v+lt[t+2]*y)}let w=.6-P*P-D*D-F*F;if(w<0)u=0;else{const t=3*st[O+M+dt[b+E+dt[R+T]]];u=(w*=w)*w*(lt[t]*P+lt[t+1]*D+lt[t+2]*F)}let U=.6-C*C-L*L-N*N;if(U<0)i=0;else{const t=3*st[O+1+dt[b+1+dt[R+1]]];i=(U*=U)*U*(lt[t]*C+lt[t+1]*L+lt[t+2]*N)}return 32*(e+o+u+i)}function mt(t,n,r,e){let o,u,i,c,f;const a=(t+n+r+e)*ct,d=Math.floor(t+a),s=Math.floor(n+a),l=Math.floor(r+a),h=Math.floor(e+a),p=(d+s+l+h)*ft,g=t-(d-p),m=n-(s-p),A=r-(l-p),M=e-(h-p);let E,T,I,v,y,P,D,F,C,L,N,O,b=0,R=0,S=0,_=0;g>m?b++:R++,g>A?b++:S++,g>M?b++:_++,m>A?R++:S++,m>M?R++:_++,A>M?S++:_++;const w=g-(E=b>=3?1:0)+ft,U=m-(T=R>=3?1:0)+ft,x=A-(I=S>=3?1:0)+ft,G=M-(v=_>=3?1:0)+ft,B=g-(y=b>=2?1:0)+2*ft,k=m-(P=R>=2?1:0)+2*ft,j=A-(D=S>=2?1:0)+2*ft,H=M-(F=_>=2?1:0)+2*ft,K=g-(C=b>=1?1:0)+3*ft,q=m-(L=R>=1?1:0)+3*ft,Y=A-(N=S>=1?1:0)+3*ft,z=M-(O=_>=1?1:0)+3*ft,Q=g-1+4*ft,X=m-1+4*ft,W=A-1+4*ft,V=M-1+4*ft,$=255&d,J=255&s,Z=255&l,tt=255&h;let nt=.6-g*g-m*m-A*A-M*M;if(nt<0)o=0;else{const t=dt[$+dt[J+dt[Z+dt[tt]]]]%32*4;o=(nt*=nt)*nt*(ht[t]*g+ht[t+1]*m+ht[t+2]*A+ht[t+3]*M)}let rt=.6-w*w-U*U-x*x-G*G;if(rt<0)u=0;else{const t=dt[$+E+dt[J+T+dt[Z+I+dt[tt+v]]]]%32*4;u=(rt*=rt)*rt*(ht[t]*w+ht[t+1]*U+ht[t+2]*x+ht[t+3]*G)}let et=.6-B*B-k*k-j*j-H*H;if(et<0)i=0;else{const t=dt[$+y+dt[J+P+dt[Z+D+dt[tt+F]]]]%32*4;i=(et*=et)*et*(ht[t]*B+ht[t+1]*k+ht[t+2]*j+ht[t+3]*H)}let ot=.6-K*K-q*q-Y*Y-z*z;if(ot<0)c=0;else{const t=dt[$+C+dt[J+L+dt[Z+N+dt[tt+O]]]]%32*4;c=(ot*=ot)*ot*(ht[t]*K+ht[t+1]*q+ht[t+2]*Y+ht[t+3]*z)}let ut=.6-Q*Q-X*X-W*W-V*V;if(ut<0)f=0;else{const t=dt[$+1+dt[J+1+dt[Z+1+dt[tt+1]]]]%32*4;f=(ut*=ut)*ut*(ht[t]*Q+ht[t+1]*X+ht[t+2]*W+ht[t+3]*V)}return 27*(o+u+i+c+f)}function At(t,n,r,e){const o=[];for(let u=0;u<n;u++)for(let i=0;i<t;i++){const c=i/t,f=u/n,a=Math.cos(2*c*Math.PI)*r/(2*Math.PI),d=Math.cos(2*f*Math.PI)*e/(2*Math.PI),s=Math.sin(2*c*Math.PI)*r/(2*Math.PI),l=Math.sin(2*f*Math.PI)*e/(2*Math.PI);o.push(mt(a,d,s,l))}return o}function Mt(t,n){const r=X(t,n);return[t[0],t[1],t[2],-r]}function Et(t,n,r){return Mt(Tt(t,n,r),t)}function Tt(t,n,r){return z(W(H(r,n),H(t,n)))}function It(t){const[n,r,e,o]=t;return[1-2*n*n,-2*n*r,-2*n*e,0,-2*n*r,1-2*r*r,-2*r*e,0,-2*n*e,-2*r*e,1-2*e*e,0,-2*n*o,-2*r*o,-2*e*o,1]}function vt(t){return t*=.5,[0,Math.sin(t),0,Math.cos(t)]}function yt(t){return t*=.5,[Math.sin(t),0,0,Math.cos(t)]}function Pt(t){return t*=.5,[0,0,Math.sin(t),Math.cos(t)]}function Dt(t){return Math.floor(Math.random()*t)}function Ft(t,n){return Dt(n-t)+t}function Ct(){return(Math.random()+Math.random()+Math.random())/3}function Lt(t){function n(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),function(){window.removeEventListener("resize",n)}}function Nt(){const t={size:{width:0,height:0}},n=Lt(n=>t.size=n);return{state:t,destroy:n}}var Ot;function bt(t,n){const r=n||t,{element:e=window}=t,o={};function u(t){o[t.keyCode]=Date.now(),r(o)}function i(t){delete o[t.keyCode],r(o)}return e.addEventListener("keyup",i,!1),e.addEventListener("keydown",u,!1),r(o),function(){e.removeEventListener("keyup",i),e.removeEventListener("keydown",u)}}function Rt(t){const n={Keys:Ot,state:{pressed:{}},destroy:()=>{}};return n.destroy=bt(function(t){n.state.pressed=t},t),n}!function(t){t[t.CANCEL=3]="CANCEL",t[t.HELP=6]="HELP",t[t.BACK_SPACE=8]="BACK_SPACE",t[t.TAB=9]="TAB",t[t.CLEAR=12]="CLEAR",t[t.RETURN=13]="RETURN",t[t.ENTER=14]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CONTROL=17]="CONTROL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESCAPE=27]="ESCAPE",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.PRINTSCREEN=44]="PRINTSCREEN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_1=49]="DIGIT_1",t[t.DIGIT_2=50]="DIGIT_2",t[t.DIGIT_3=51]="DIGIT_3",t[t.DIGIT_4=52]="DIGIT_4",t[t.DIGIT_5=53]="DIGIT_5",t[t.DIGIT_6=54]="DIGIT_6",t[t.DIGIT_7=55]="DIGIT_7",t[t.DIGIT_8=56]="DIGIT_8",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.EQUALS=61]="EQUALS",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.CONTEXT_MENU=93]="CONTEXT_MENU",t[t.NUMPAD0=96]="NUMPAD0",t[t.NUMPAD1=97]="NUMPAD1",t[t.NUMPAD2=98]="NUMPAD2",t[t.NUMPAD3=99]="NUMPAD3",t[t.NUMPAD4=100]="NUMPAD4",t[t.NUMPAD5=101]="NUMPAD5",t[t.NUMPAD6=102]="NUMPAD6",t[t.NUMPAD7=103]="NUMPAD7",t[t.NUMPAD8=104]="NUMPAD8",t[t.NUMPAD9=105]="NUMPAD9",t[t.MULTIPLY=106]="MULTIPLY",t[t.ADD=107]="ADD",t[t.SEPARATOR=108]="SEPARATOR",t[t.SUBTRACT=109]="SUBTRACT",t[t.DECIMAL=110]="DECIMAL",t[t.DIVIDE=111]="DIVIDE",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.F13=124]="F13",t[t.F14=125]="F14",t[t.F15=126]="F15",t[t.F16=127]="F16",t[t.F17=128]="F17",t[t.F18=129]="F18",t[t.F19=130]="F19",t[t.F20=131]="F20",t[t.F21=132]="F21",t[t.F22=133]="F22",t[t.F23=134]="F23",t[t.F24=135]="F24",t[t.NUM_LOCK=144]="NUM_LOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.COMMA=188]="COMMA",t[t.PERIOD=190]="PERIOD",t[t.SLASH=191]="SLASH",t[t.BACK_QUOTE=192]="BACK_QUOTE",t[t.OPEN_BRACKET=219]="OPEN_BRACKET",t[t.BACK_SLASH=220]="BACK_SLASH",t[t.CLOSE_BRACKET=221]="CLOSE_BRACKET",t[t.QUOTE=222]="QUOTE",t[t.META=224]="META"}(Ot||(Ot={}));const St={LEFT:0,MIDDLE:1,RIGHT:2};function _t(t,n){const r=n||t,{element:e=document,enableRightButton:o}=t,u={pressed:{},drag:{x:0,y:0,dX:0,dY:0},dragging:!1};let i=0,c=0,f=0,a=0;function d(t){u.pressed[t.button]=t,t.button===St.LEFT&&(i=f=t.clientX,c=a=t.clientY,u.dragging=!0),r(u)}function s(t){delete u.pressed[t.button],delete u.drag.event,u.drag.x=0,u.drag.y=0,u.drag.dX=0,u.drag.dY=0,u.dragging=!1,r(u)}function l(t){u.dragging&&(u.drag.event=t,u.drag.x=i-t.clientX,u.drag.y=c-t.clientY,u.drag.dX=f-t.clientX,u.drag.dY=a-t.clientY,f=t.clientX,a=t.clientY,r(u))}function h(t){t.preventDefault()}return e.addEventListener("mousedown",d),document.addEventListener("mouseup",s),document.addEventListener("mousemove",l),o&&e.addEventListener("contextmenu",h),r(u),function(){e.removeEventListener("mousedown",d),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",s),o&&e.removeEventListener("contextmenu",h)}}function wt(t={}){const n={Buttons:St,state:{},destroy:()=>{}};return n.destroy=_t(t,function(t){n.state=t}),n}function Ut(t){let n,r=!0;return requestAnimationFrame(function e(o){r&&(t(o-(n||o)),n=o,requestAnimationFrame(e))}),function(){r=!1}}function xt(t){let n=!0;return requestAnimationFrame(function r(e){n&&(t(e),requestAnimationFrame(r))}),function(){n=!1}}function Gt(t=Ut){let n=[];function r(){for(const t in n)n[t].apply(null,arguments)}return{start:function(){this.stop=t(r)},stop:()=>{},step:r,addUpdate:function(t){n.push(t)},removeUpdate:function(t){n=n.filter(n=>n!==t)}}}const Bt=new Array(16);const kt=[],jt={};for(let t=0;t<256;t++)kt[t]=(t+256).toString(16).substr(1),jt[kt[t]]=t;function Ht(){const t=function(){for(let t,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random(),Bt[n]=t>>>((3&n)<<3)&255);return Bt}();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(t){const n=kt;let r=0;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}(t)}function Kt(t){return t[Dt(t.length)]}function qt(t,n){for(let r=0;r<n;r++)t(r)}function Yt(t,n,r=[]){for(let e=0;e<n;e++)r[e]=t(e);return r}function zt(t,n,r,e=[]){const o=Math.min(n.length,r.length);for(let u=0;u<o;u++)e[u]=t(n[u],r[u]);return e}function Qt(t,n=[]){for(const r of t){const t=n.length;for(let e=0;e<r.length;e++)n[e+t]=r[e]}return n}function Xt(t,n,r=[]){return Qt(n.map(t),r)}function Wt(t){const n=[];for(let r=0;r<t.length;r++){const e=Ft(r,t.length),o=void 0!==n[r]?n[r]:t[r];n[r]=void 0!==n[e]?n[e]:t[e],n[e]=o}return n}function Vt(t,n){if(Array.isArray(n))return n.map(t);{const r={};for(const e in n)r[e]=t(n[e],e);return r}}function $t(t,n){for(const r in n)t(n[r],r)}function Jt(t,n){if("object"==typeof t&&"object"==typeof n&&!Array.isArray(t)&&!Array.isArray(n)&&t!==n){const r=Object.assign({},t);for(const e in n){const o=t[e],u=n[e];void 0!==u?r[e]=Jt(o,u):delete r[e]}return r}return n}function Zt(t,n,r){const e=r&&r.ignore;if("object"==typeof t&&"object"==typeof n&&!Array.isArray(t)&&!Array.isArray(n)&&t!==n){for(const r in t)if(t.hasOwnProperty(r)&&!(e&&r in e&&!0===e[r])){const o=t[r],u=n[r];void 0!==u&&(t[r]=Zt(o,u,{ignore:e&&e[r]}))}return t}return n}function tn(t){return function(n,r){return void 0!==r?t(n,r):r=>t(n,r)}}function nn(t,...n){return t.bind(null,...n)}const rn=[0,0,0,255],en=[255,255,255,255];function on([t,n,r,e],[o,u,i,c]){const f=c/255;return[Math.floor(L(f,t,o)),Math.floor(L(f,n,u)),Math.floor(L(f,r,i)),e]}function un(t,n){return null==n&&(n=255),[t,t,t,n]}function cn([t,n,r,e]){return"rgba("+t+", "+n+", "+r+", "+e/255+")"}function fn(t){return t.map(t=>t/255)}function an(t){return t.map(t=>Math.floor(255*t))}function dn(t){return[(t=Math.floor(t))>>16&255,t>>8&255,255&t]}function sn([t,n,r]){return"#"+((1<<24)+(t<<16)+(n<<8)+r).toString(16).slice(1)}function ln(t){return 3===(t=t.replace(/^\s*#|\s*$/g,"")).length&&(t=t.replace(/(.)/g,"$1$1")),dn(parseInt(t,16))}function hn([t,n,r]){const e=Math.max(t,n,r),o=Math.min(t,n,r),u=e-o,i=(e+o)/2;let c=0,f=0;return c=0===u?0:e===t?(n-r)/u%6/6:e===n?((r-t)/u+2)/6:((t-n)/u+4)/6,f=0===u?0:u/(1-Math.abs(2*i-1)),{h:gn(c),s:f,l:i}}function pn({h:t,s:n,l:r}){const e=(1-Math.abs(2*r-1))*n,o=e*(1-Math.abs(6*t%2-1)),u=r-e/2;let i,c,f;return t<1/6?(i=e,c=o,f=0):t<2/6?(i=o,c=e,f=0):t<.5?(i=0,c=e,f=o):t<4/6?(i=0,c=o,f=e):t<5/6?(i=o,c=0,f=e):(i=e,c=0,f=o),[i=N(0,1,i+u),c=N(0,1,c+u),f=N(0,1,f+u)]}function gn(t){return t>=1?t-1:t<0?t+1:t}function mn(t,n){return Object.assign({},t,{h:gn(t.h+n)})}function An(t,n){return Object.assign({},t,{s:N(0,1,t.s+n)})}function Mn(t,n){return Object.assign({},t,{l:N(0,1,t.l+n)})}function En(t){return Math.floor(127*(t+1))}function Tn(t,n,r){const e=r.canvas.width,o=r.canvas.height,u=At(e,o,t,n),i=At(e,o,2.1*t,2.1*n),c=At(e,o,4.2*t,4.2*n),f=At(e,o,8.3*t,8.3*n),a=r.getImageData(0,0,e,o);for(let t=0;t<u.length-1;t++){const n=4*t;a.data[n]=En(u[t]),a.data[n+1]=En(i[t]),a.data[n+2]=En(c[t]),a.data[n+3]=En(f[t])}r.putImageData(a,0,0)}function In([t,n],r){const e=r.width,o=r.height;return t>=e&&(t-=e),n>=o&&(n-=o),t<0&&(t+=e),n<0&&(n+=o),[t,n]}function vn([t,n],r){const e=r.width,o=r.height;return t<0&&(t=0),n<0&&(n=0),t>=e&&(t=e),n>=o&&(n=o),[t,n]}function yn(t){function n(n,r){const[e,o]=t(r,n);return 4*(o*n.height+e)}function r(t,r){const e=n(t,r);return[t.data[e],t.data[e+1],t.data[e+2],t.data[e+3]]}function e(t,r,e){const o=n(t,r);t.data[o]=e[0],t.data[o+1]=e[1],t.data[o+2]=e[2],t.data[o+3]=e[3]}return t=t||vn,{getPixelIndex:n,getColorAt:r,setColorAt:e,increaseAllBy:function(t,[n,r,e,o]){const u=t.data;for(let t=0;t<u.length;t+=4)u[t]+n<256&&(u[t]+=n),u[t+1]+r<256&&(u[t+1]+=r),u[t+2]+e<256&&(u[t+2]+=e),u[t+3]+o<256&&(u[t+3]+=o)},decreaseAllBy:function(t,[n,r,e,o]){const u=t.data;for(let t=0;t<=u.length;t+=4)n<=u[t]&&(u[t]-=n),r<=u[t+1]&&(u[t+1]-=r),e<=u[t+2]&&(u[t+2]-=e),o<=u[t+3]&&(u[t+3]-=o)},mixinColor:function(t,n){for(let o=0;o<t.width;o++)for(let u=0;o<t.height;u++)e(t,[o,u],on(r(t,[o,u]),n))},replaceWithImageDataAt:function(t,n,[o,u]){const i=n.width-1,c=n.height-1;for(let f=0;f<c;f++)for(let c=0;c<i;c++)e(t,[o+c,u+f],r(n,[c,f]))},drawImageAt:function(t,n,[o,u]){const i=n.width-1,c=n.height-1;for(let f=0;f<c;f++)for(let c=0;c<i;c++)e(t,[o+c,u+f],on(r(t,[o+c,u+f]),r(n,[c,f])))}}}function Pn(t){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");if(r)return r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)}const Dn=(t,n)=>t-n,Fn=(t,n)=>t.localeCompare(n);class Cn{constructor(t,n,r){this.parent=t,this.left=t,this.right=t,this.key=n,this.value=r}}const Ln=function(){const t={parent:null,left:null,right:null,key:null};return t.parent=t,t.left=t,t.right=t,t}();function Nn(t,n,r){n!==t.nil&&(Nn(t,n.left,r),r(n),Nn(t,n.right,r))}function On(t,n){if(n.right!==t.nil)return Un(t,n.right);let r=n.parent;for(;r!==t.nil&&n===r.right;)n=r,r=r.parent;return r}function bn(t,n){if(n.left!==t.nil)return xn(t,n.right);let r=n.parent;for(;r!==t.nil&&n===r.left;)n=r,r=r.parent;return r}function Rn(t,n){let r=t.nil,e=t.root;for(;e!==t.nil;)r=e,e=t.compare(n.key,e.key)<0?e.left:e.right;n.parent=r,r===t.nil?t.root=n:t.compare(n.key,r.key)<0?r.left=n:r.right=n}function Sn(t,n,r){for(;n!==t.nil&&n.key!==r;)n=t.compare(r,n.key)<0?n.left:n.right;return n}function _n(t,n,r){n.parent===t.nil?t.root=r:n===n.parent.left?n.parent.left=r:n.parent.right=r,r.parent=n.parent}function wn(t,n){if(n.left===t.nil)_n(t,n,n.right);else if(n.right===t.nil)_n(t,n,n.left);else{const r=Un(t,n.right);r.parent!==n&&(_n(t,r,r.right),r.right=n.right,r.right.parent=r),_n(t,n,r),r.left=n.left,r.left.parent=r}}function Un(t,n){for(;n!==t.nil&&n.left!==t.nil;)n=n.left;return n}function xn(t,n){for(;n.right!==t.nil;)n=n.right;return n}function Gn(t,n){const r=n.right;n.right=r.left,r.left!==t.nil&&(r.left.parent=n),r.parent=n.parent,n.parent===t.nil?t.root=r:n===n.parent.left?n.parent.left=r:n.parent.right=r,r.left=n,n.parent=r}function Bn(t,n){const r=n.left;n.left=r.right,r.right!==t.nil&&(r.right.parent=n),r.parent=n.parent,n.parent===t.nil?t.root=r:n===n.parent.right?n.parent.right=r:n.parent.left=r,r.right=n,n.parent=r}function kn(t,n,r){if(n&&n!==t.nil)for(;n!==t.nil;)r(n),n=n.parent}class jn{constructor(t,n=Ln){this.count=0,this.compare=t,this.root=n,this.nil=n}createNode(t,n){return new Cn(this.nil,t,n)}insert(t,n){const r=this.createNode(t,n);return Rn(this,r),this.count++,r}getNode(t){return Sn(this,this.root,t)}get(t){const n=this.getNode(t);return n===this.nil?n:n.value}keys(){const t=[];return Nn(this,this.root,n=>t.push(n.key)),t}min(){return Un(this,this.root).key}max(){return xn(this,this.root).key}remove(t){const n=Sn(this,this.root,t);n!==this.nil&&(wn(this,n),this.count--)}size(){return this.count}}class Hn extends Cn{constructor(t,n,r){super(t,n,r),this.red=!0}}const Kn=Object.assign({},Ln,{red:!1});function qn(t,n){for(;n.parent.red;)if(n.parent===n.parent.parent.left){const r=n.parent.parent.right;r.red?(n.parent.red=!1,r.red=!1,n.parent.parent.red=!0,n=n.parent.parent):(n===n.parent.right&&Gn(t,n=n.parent),n.parent.red=!1,n.parent.parent.red=!0,Bn(t,n.parent.parent))}else{const r=n.parent.parent.left;r.red?(n.parent.red=!1,r.red=!1,n.parent.parent.red=!0,n=n.parent.parent):(n===n.parent.left&&Bn(t,n=n.parent),n.parent.red=!1,n.parent.parent.red=!0,Gn(t,n.parent.parent))}t.root.red=!1}function Yn(t,n){let r,e=n,o=n.red;if(n.left===t.nil?(r=n.right,_n(t,n,n.right)):n.right===t.nil?(r=n.left,_n(t,n,n.left)):(o=(e=Un(t,n.right)).red,r=e.right,e.parent===n?r.parent=e:(_n(t,e,e.right),e.right=n.right,e.right.parent=e),_n(t,n,e),e.left=n.left,e.left.parent=e,e.red=n.red),!o){for(;r!==t.root&&!r.red;)if(r===r.parent.left){let n=r.parent.right;n.red&&(n.red=!1,r.parent.red=!0,Gn(t,r.parent),n=r.parent.right),n.left.red||n.right.red?(n.right.red||(n.left.red=!1,n.red=!0,Bn(t,n),n=r.parent.right),n.red=r.parent.red,r.parent.red=!1,n.right.red=!1,Gn(t,r.parent),r=t.root):(n.red=!0,r=r.parent)}else{let n=r.parent.left;n.red&&(n.red=!1,r.parent.red=!0,Bn(t,r.parent),n=r.parent.left),n.left.red||n.right.red?(n.left.red||(n.right.red=!1,n.red=!0,Gn(t,n),n=r.parent.left),n.red=r.parent.red,r.parent.red=!1,n.left.red=!1,Bn(t,r.parent),r=t.root):(n.red=!0,r=r.parent)}r.red=!1}}class zn extends jn{constructor(t,n=Kn){super(t,n)}createNode(t,n){return new Hn(this.nil,t,n)}insert(t,n){const r=this.createNode(t,n);return Rn(this,r),qn(this,r),this.count++,r}remove(t){const n=Sn(this,this.root,t);n!==this.nil&&(Yn(this,n),this.count--)}}function Qn(t){return Math.floor(t/2)}function Xn(t){return 2*t+1}function Wn(t){return 2*t}function Vn(t,n,r){const e=r[t];r[t]=r[n],r[n]=e}function $n(t,n,r){const e=Wn(r),o=Xn(r);let u=r;e<n.length&&t(n[u],n[e])<0&&(u=e),o<n.length&&t(n[u],n[o])<0&&(u=o),u!==r&&(Vn(r,u,n),$n(t,n,u))}function Jn(t,n){for(let r=Math.floor((n.length-1)/2);r>=0;r--)$n(t,n,r)}function Zn(t,n,r){if(n.push(r),n.length>1){let r=n.length-1,e=Qn(r);for(;r>0&&t(n[e],n[r])<0;)Vn(e,r,n),e=Qn(r=e)}}function tr(t){let n=[];return{size:function(){return n.length},fromArray:function(r){n=r.concat(),Jn(t,n)},pull:function(){const r=n.shift();return $n(t,n,0),r},getTop:function(){return n[0]},insert:r=>Zn(t,n,r)}}function nr(t,n,r,e){return zt(nn(t,n),r,e)}const rr=nn(nr,L);function er(t,[n,r]){const e=rr(t,n,r);return[[n,e],[e,r]]}function or(t,n){return n.map(n=>j(t,n))}function ur(t){return t.unshift(t.pop()),t}function ir(t){return t.push(t.shift()),t}function cr(t){return ur(t.concat())}function fr(t){return ir(t.concat())}function ar(t){return z(W(H(t[0],t[1]),H(t[2],t[1])))}function dr(t,n){return V(H(n,t[0]),H(t[1],t[0]))}function sr(t){return[t[0],t[1]]}function lr(t){return[t[1],t[2]]}function hr(t){return[t[2],t[3]]}function pr(t){return[t[3],t[0]]}function gr(t,n){return t.concat(cr(n))}function mr(t,n){return gr(or(t,n),n)}function Ar(t,n){return cr(mr(t,n))}function Mr(t,n){return gr(n,or(t,n))}function Er(t,n){return cr(Mr(t,n))}function Tr(t,n,[r,e,o,u]){const i=rr(t,r,u),c=rr(n,e,o);return[[r,e,c,i],[i,c,o,u]]}function Ir(t,n,[r,e,o,u]){const i=rr(t,r,e),c=rr(n,u,o);return[[r,i,c,u],[i,e,o,c]]}const vr=[[0,2,1],[0,3,2]];function yr(t){return Qt(Yt(t=>vr.map(n=>n.map(n=>4*t+n)),t))}r.d(n,"math",function(){return Pr}),r.d(n,"events",function(){return Dr}),r.d(n,"utils",function(){return Fr}),r.d(n,"fp",function(){return Cr}),r.d(n,"graphics",function(){return Lr}),r.d(n,"geometry",function(){return Nr}),r.d(n,"algorithms",function(){return Or}),r.d(n,"datastructures",function(){return br});const Pr={core:e,noise:c,coords:i,vectors:u,geometry:f,random:a},Dr={dom:d,mouse:l,keyboard:s,animation:h},Fr={uuid:p,seq:g,predicates:o,object:m},Cr={core:A},Lr={colors:M,pixels:T,textures:E},Nr={primitives:D,quad:F},Or={base:I},br={bintree:v,rbtree:y,heap:P};n.default={math:Pr,events:Dr,utils:Fr,graphics:Lr,fp:Cr,geometry:Nr,datastructures:br,algorithms:Or}}])});